{
	"steps": [
		{
			"name": "gcr.io/cloud-builders/docker",
			"id": "Dockerizing application",
			"args": [
				"build",
				"-f",
				"deployment-config/Dockerfile",
				"-t",
				"gcr.io/$PROJECT_ID/poker-api:$COMMIT_SHA",
				"."
			]
		},
		{
			"name": "gcr.io/cloud-builders/docker",
			"id": "Pushing docker image to container registry",
			"args": ["push", "gcr.io/$PROJECT_ID/poker-api:$COMMIT_SHA"]
		},
		{
			"name": "gcr.io/google.com/cloudsdktool/cloud-sdk",
			"id": "Deploying to US central",
			"args": [
				"run",
				"deploy",
				"poker-api",
				"--image",
				"gcr.io/$PROJECT_ID/poker-api:$COMMIT_SHA",
				"--region",
				"us-central1"
			]
		}
	],
	"images": ["gcr.io/$PROJECT_ID/poker-api:$COMMIT_SHA"]
}
